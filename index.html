<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Driven</title>
</head>
<style>
  :root{--bg:#0f172a;--card:#111827;--accent:#38bdf8;--muted:#94a3b8;--ok:#22c55e;--bad:#ef4444;}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans";background:var(--bg);color:#e5e7eb}
  header{padding:28px 16px;text-align:center;border-bottom:1px solid #1f2937;background:linear-gradient(180deg,rgba(56,189,248,.08),transparent)}
  h1{margin:0 0 8px 0;font-size:clamp(22px,4vw,36px);letter-spacing:.2px}
  p.sub{margin:0;color:var(--muted);font-size:clamp(14px,2.3vw,16px)}
  main{max-width:900px;margin:24px auto;padding:16px}
  .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:18px;margin:16px 0;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .question{font-size:18px;margin:6px 0 14px 0;line-height:1.4}
  .choices{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .choice{padding:12px 14px;border-radius:12px;border:1px solid #243041;background:#0b1220;color:#e5e7eb;text-align:left;cursor:pointer;transition:transform .05s ease, border-color .2s ease}
  .choice:hover{transform:translateY(-1px);border-color:var(--accent)}
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
  button{background:var(--accent);border:none;color:#05232e;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer}
  #hud{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:12px 0}
  .pill{border:1px solid #1f2937;background:#0b1220;border-radius:999px;padding:6px 12px;font-size:13px;color:#cbd5e1}
  #result{font-size:18px;margin-top:6px;text-align:center}
  footer{color:var(--muted);text-align:center;padding:24px 12px}
  @media (max-width:720px){.choices{grid-template-columns:1fr}}
</style>
<body>
  <header>
    <h1>Event Driven Programming — Quiz</h1>
    <p class="sub">Inline Events • addEventListener • Callbacks • Promises • Async/Await • DOM & Timers • Fetch API</p>
  </header>
  <main>
    <div id="hud">
      <span class="pill" id="progress">Question 1/15</span>
      <span class="pill" id="timer">Time: 10:00</span>
    </div>

    <div id="quiz"></div>

    <div class="card">
      <div class="question" id="result">Answer all questions to see your score.</div>
      <div class="controls">
        <button id="retry" class="secondary">Retry</button>
      </div>
    </div>
  </main>
  <footer>Made for classroom use. Tip: Use it offline by saving this file.</footer>


<script>
let questions = [];
let currentTest = null;
let score = 0;
let current = 0;
let timer;
let remaining = 10 * 60;

const quizDiv = document.getElementById("quiz");
const progressEl = document.getElementById("progress");
const timerEl = document.getElementById("timer");
const resultEl = document.getElementById("result");
const retryBtn = document.getElementById("retry");

// Format time
function formatTime(s){
  const m = Math.floor(s/60).toString().padStart(2,"0");
  const sec = (s%60).toString().padStart(2,"0");
  return m+":"+sec;
}

// Timer
function startTimer(){
  timer = setInterval(()=>{
    remaining--;
    timerEl.textContent = "Time: "+formatTime(remaining);
    if(remaining<=0){ clearInterval(timer); endQuiz(true); }
  },1000);
}

// Render a multiple-choice question
function renderMCQQuestion(index){
  quizDiv.innerHTML="";
  const q = questions[index];
  progressEl.textContent=`Question ${index+1}/${questions.length}`;
  const card = document.createElement("div");
  card.className="card";
  card.innerHTML=`<div class="question">${q.question}</div><div class="choices"></div>`;
  const choicesDiv = card.querySelector(".choices");
  q.choices.forEach((c,i)=>{
    const btn = document.createElement("button");
    btn.className="choice";
    btn.textContent=c;
    btn.addEventListener("click",()=>chooseMCQ(i,q.answer));
    choicesDiv.appendChild(btn);
  });
  quizDiv.appendChild(card);
}

// Handle MCQ choice
function chooseMCQ(selected, correct){
  if(selected===correct.charCodeAt(0)-65) score++;
  current++;
  if(current<questions.length){
    renderMCQQuestion(current);
  } else endQuiz(false);
}

// Render matching question (Test 2)
function renderMatchingTest(){
  quizDiv.innerHTML="";
  const test = currentTest;
  progressEl.textContent="Matching Test";
  const card = document.createElement("div");
  card.className="card";
  let html=`<div class="question">${test.instructions}</div><ol>`;
  test.attributes.forEach(attr=>{
    html+=`<li>${attr.attribute}: <input data-answer="${attr.type}" maxlength="1" style="width:30px;text-transform:uppercase"></li>`;
  });
  html+="</ol><button id='submit-match'>Submit</button>";
  card.innerHTML=html;
  quizDiv.appendChild(card);

  document.getElementById("submit-match").addEventListener("click",()=>{
    const inputs = card.querySelectorAll("input");
    score=0;
    inputs.forEach(inp=>{
      if(inp.value.toUpperCase()===inp.dataset.answer) score++;
    });
    endQuiz(false, inputs.length);
  });
}

// End quiz
function endQuiz(timeExpired, totalQuestions=null){
  clearInterval(timer);
  const total = totalQuestions || questions.length;
  const pct = Math.round((score/total)*100);
  const msg = timeExpired ? "⏱️ Time's up! " : "🎉 Quiz complete! ";
  resultEl.textContent=`${msg}You scored ${score}/${total} (${pct}%).`;
}

// Reset
function reset(){
  score=0; current=0; remaining=10*60;
  resultEl.textContent="Answer all questions to see your score.";
  clearInterval(timer); startTimer();
  if(currentTest.type==="mcq") renderMCQQuestion(0);
  else renderMatchingTest();
}

// Load JSON
fetch("quiz-data.json")
  .then(res=>res.json())
  .then(data=>{
    // Example: load Test 1 by default
    currentTest=data.tests[0];
    currentTest.type=currentTest.questions ? "mcq" : "match";
    questions = currentTest.questions || [];
    reset();
  })
  .catch(err=>{console.error(err); resultEl.textContent="Failed to load quiz data."});

retryBtn.addEventListener("click", reset);
</script>

</body>
</html>